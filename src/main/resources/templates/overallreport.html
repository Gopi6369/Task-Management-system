<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Management Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f8f9fa;
    }
    .header {
      background-color: #6f42c1;
      color: white;
      border-radius: 0.75rem;
      padding: 1.5rem;
    }
    .card {
      border-radius: 0.75rem;
    }
    .card-header {
      background-color: #e9d8fd;
      font-weight: 600;
    }
  </style>
</head>
<body>

<div class="container mt-4">
  <div class="header text-center mb-4">
    <h2>üìä Management Dashboard</h2>
    <p>Department-wise Reporting Panel</p>
  </div>

  <div class="row g-4">

   <!-- Developers -->
<div class="col-md-6 col-lg-3">
  <a href="/developerreport" class="text-decoration-none text-dark">
    <div class="card h-100">
      <div class="card-header text-center bg-light">üë®‚Äçüíª Developers</div>
      <div class="card-body text-center">
        <i class="bi bi-laptop fs-1 text-primary"></i>
        <p id="devCompleted" class="text-muted mb-1">Tasks Completed: -</p>
        <p id="devInProgress" class="text-muted mb-0">In Progress: -</p>
      </div>
    </div>
  </a>
</div>

<!-- Testers -->
<div class="col-md-6 col-lg-3">
  <a href="/tester1" class="text-decoration-none text-dark">
    <div class="card h-100">
      <div class="card-header text-center bg-light">üß™ Testers</div>
      <div class="card-body text-center">
        <i class="bi bi-bug-fill fs-1 text-danger"></i>
        <p id="testerCases" class="text-muted mb-1">Test Cases: -</p>
        <p id="testerBugs" class="text-muted mb-0">Bugs Found: -</p>
      </div>
    </div>
  </a>
</div>

<!-- Data Analysts -->
<div class="col-md-6 col-lg-3">
  <a href="data_analyst_report.html" class="text-decoration-none text-dark">
    <div class="card h-100">
      <div class="card-header text-center bg-light">üìà Data Analysts</div>
      <div class="card-body text-center">
        <i class="bi bi-graph-up-arrow fs-1 text-success"></i>
        <p id="analystDashboards" class="text-muted mb-1">Dashboards: -</p>
        <p id="analystInsights" class="text-muted mb-0">Insights: -</p>
      </div>
    </div>
  </a>
</div>


<!-- Login Panel -->
<div class="col-md-6 col-lg-3">
  <a href="/login" class="text-decoration-none text-dark">
    <div class="card h-100 border-0 shadow-sm">
      <div class="card-header text-center bg-light fw-semibold">üîê Login</div>
      <div class="card-body text-center">
        <i class="bi bi-person-circle fs-1 text-secondary mb-2"></i>
        <p class="text-muted mb-1">Access your dashboard</p>
        <p class="text-muted">Admin / Employee</p>
        <div class="mt-3">
          <span class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-box-arrow-in-right"></i> Sign In
          </span>
        </div>
      </div>
    </div>
  </a>
</div>



</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- JavaScript to fetch reports -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    fetchDeveloperReport();
    fetchTesterReport();
    fetchAnalystReport();
    fetchQAReport();

    // Optional: Refresh every 30 seconds
    // setInterval(() => {
    //   fetchDeveloperReport();
    //   fetchTesterReport();
    //   fetchAnalystReport();
    //   fetchQAReport();
    // }, 30000);
  });

  async function fetchDeveloperReport() {
    const res = await fetch("/api/report/developers");
    const data = await res.json();
    document.getElementById("devCompleted").textContent = `Tasks Completed: ${data.completed}`;
    document.getElementById("devInProgress").textContent = `In Progress: ${data.inProgress}`;
  }

  async function fetchTesterReport() {
    const res = await fetch("/api/report/testers");
    const data = await res.json();
    document.getElementById("testerCases").textContent = `Test Cases: ${data.testCases}`;
    document.getElementById("testerBugs").textContent = `Bugs Found: ${data.bugs}`;
  }

  async function fetchAnalystReport() {
    const res = await fetch("/api/report/analysts");
    const data = await res.json();
    document.getElementById("analystDashboards").textContent = `Dashboards: ${data.dashboards}`;
    document.getElementById("analystInsights").textContent = `Insights: ${data.insights}`;
  }

  async function fetchQAReport() {
    const res = await fetch("/api/report/quality-analysts");
    const data = await res.json();
    document.getElementById("qaCoverage").textContent = `Coverage: ${data.coverage}%`;
    document.getElementById("qaReports").textContent = `Reports: ${data.reports}`;
  }
</script>

</body>
</html>
